{% extends 'base.html' %}

{% block title %}Gestão de Usuários{% endblock %}

{% block content %}
<div class="mt-5">
	<h1 class="display-4">Gestão de Usuários</h1>
	<div class="mb-3 d-flex">
		<a href="{% url 'dashboard' %}" class="btn btn-primary mr-2">Dashboard</a>
		<a href="{% url 'logout' %}" class="btn btn-secondary ms-auto">Logout</a>
	</div>
	<form class="mb-3">
		<input type="text" name="q" placeholder="Buscar por nome ou email" class="form-control mb-2">
		<input type="number" name="idade" min="0" max="200" placeholder="Buscar por idade aproximada"
		       class="form-control mb-2">
		<select name="status" class="form-control mb-2">
			<option value="">Todos</option>
			<option value="ativo">Ativos</option>
			<option value="inativo">Inativos</option>
		</select>
		<button type="submit" class="btn btn-primary">Buscar</button>
	</form>
</div>
<ul class="list-group align-items-center mt-3">
	{% for usuario in usuarios %}
	<li class="list-group-item rounded shadow border my-2 d-flex row" style="min-height: 180px; width: 500px; ">
		<div>
			<h5 class="mb-1"><strong>{{ usuario.nome }}</strong></h5>
			{% if usuario.num_pets %}
			<p class="mb-1">Pets: {{ usuario.num_pets }}</p>
			{% for pet in pets %}
			{% if pet.usuario == usuario %}
			<p class="mb-1">{{ pet.nome }}</p>
			{% endif %}
			{% endfor %}
			{% else %}
			<p class="mb-1">Nenhum pet cadastrado :(</p>
			{% endif %}
		</div>
		<div class="mt-auto d-flex">
			{% if usuario.is_active %}
			<a href="{% url 'desativar_usuario' usuario.id %}" class="btn btn-secondary mt-auto mr-2">Desativar</a>
			{% else %}
			<a href="{% url 'reativar_usuario' usuario.id %}" class="btn btn-success mt-auto mr-2">Reativar</a>
			{% endif %}
			<a href="{% url 'excluir_usuario' usuario.id %}" class="btn btn-danger ms-auto">Excluir Usuário</a>
		</div>
	</li>
	{% endfor %}
</ul>
{% endblock %}